project:
  name: Apache Airflow Recipe
services:
  - hostname: redis
    priority: 10
    type: keydb@6
    mode: NON_HA

  - hostname: db
    priority: 10
    type: postgresql@16
    mode: NON_HA

  - hostname: webserver
    priority: 5
    type: python@3.12
    verticalAutoscaling:
      minRam: 4
    maxContainers: 1
    buildFromGit: https://github.com/zeropsio/recipe-airflow
    zeropsSetup: webserver
    enableSubdomainAccess: true

  - hostname: scheduler
    type: python@3.12
    verticalAutoscaling:
      minRam: 4
    maxContainers: 1
    buildFromGit: https://github.com/zeropsio/recipe-airflow
    zeropsSetup: scheduler

  - hostname: worker0
    type: python@3.12
    verticalAutoscaling:
      minRam: 4
    maxContainers: 1
    buildFromGit: https://github.com/zeropsio/recipe-airflow
    zeropsSetup: worker

  - hostname: worker1
    type: python@3.12
    verticalAutoscaling:
      minRam: 4
    maxContainers: 1
    buildFromGit: https://github.com/zeropsio/recipe-airflow
    zeropsSetup: worker
